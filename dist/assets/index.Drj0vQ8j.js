(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();let l,m,ne,oe,ae,ce,T,re,ge,y,k,p,ie=null,j,U=!1,M=[],S=0,q=!1,se,L,z=!1;const $=10,I=9,Ie=[["BR1","BH1","BE1","BA1","BK","BA2","BE2","BH2","BR2"],[],["","","BC1","","","","BC2","",""],["BP1","","BP2","","BP3","","BP4","","BP5"],[],[],["RP1","","RP2","","RP3","","RP4","","RP5"],["","","RC1","","","","RC2","",""],[],["RR1","RH1","RE1","RA1","RK","RA2","RE2","RH2","RR2"]],we={RK:"帅",RA:"仕",RE:"相",RH:"马",RR:"车",RC:"炮",RP:"兵",BK:"将",BA:"士",BE:"象",BH:"馬",BR:"車",BC:"砲",BP:"卒"};let c=[],u="R",h=null,ue=[],fe=0,H=0,g=!1,W=[],K=2,le=null;function f(t,n=3e3,e=!1){y?(y.textContent=t,y.classList.remove("hidden"),y.classList.toggle("bg-red-500",e),y.classList.toggle("bg-green-500",!e),y.classList.toggle("text-white",!0),le&&clearTimeout(le),le=setTimeout(()=>{y.classList.add("hidden")},n)):console.error("showTemporaryMessage called, but popupMessageElement is null. Message:",t)}function E(t=!1){if(!l||!k||!m||!y){console.error("Cannot initialize board, essential DOM elements missing.");const e="错误: 初始化游戏板失败 (关键元素丢失)。";y?f(e,5e3,!0):console.error(e);return}if(g=!1,u="R",h=null,typeof x=="function"&&x(),W=[],l.querySelectorAll(".square").length===0){l.querySelectorAll(".palace-line").forEach(o=>o.remove());for(let o=0;o<$;o++)for(let i=0;i<I;i++){const r=document.createElement("div");r.classList.add("square"),r.dataset.row=o,r.dataset.col=i,r.addEventListener("click",()=>Re(o,i));const s=l.querySelector(".river-overlay");s?l.insertBefore(r,s):(console.warn("River overlay not found, appending square directly to board."),l.appendChild(r))}}c=JSON.parse(JSON.stringify(Ie)).map(e=>{const o=new Array(I).fill(null);return e.forEach((i,r)=>{i&&(o[r]=i)}),o}),typeof F=="function"&&F(),typeof V=="function"&&setTimeout(V,50),f(u==="R"?"红方先行":"黑方先行",2e3),m.textContent="重新开始",l.style.pointerEvents="auto",t&&(fe=0,H=0),typeof P=="function"&&P();let n="未知";K===2?n="易":K===3?n="中":K===4&&(n="难"),k.textContent=`当前难度: ${n}`}function F(){if(!l){console.error("renderBoardFromState: boardElement is null.");return}l.querySelectorAll(".piece").forEach(n=>n.remove()),typeof x=="function"&&x();for(let n=0;n<$;n++)for(let e=0;e<I;e++){const o=c[n][e];o&&typeof X=="function"&&X(o,n,e)}}function X(t,n,e){if(!l){console.error("createPieceElement: boardElement is null.");return}const o=document.createElement("div");o.classList.add("piece");const i=t.substring(0,2),r=t.charAt(0);o.classList.add(r==="R"?"red-piece":"black-piece"),o.textContent=we[i]||i[1],o.dataset.piece=t;const s=l.querySelector(`.square[data-row='${n}'][data-col='${e}']`);if(s){const a=s.querySelector(".piece");a&&a.remove(),s.appendChild(o)}else console.warn(`createPieceElement: square not found for row ${n}, col ${e}`)}function V(){if(!l){console.error("drawPalaceLines: boardElement is null.");return}l.querySelectorAll(".palace-line").forEach(e=>e.remove());const n=l.querySelector(".square");if(!n||n.offsetWidth===0){setTimeout(V,50);return}typeof N=="function"&&(N(7,3,9,5),N(7,5,9,3),N(0,3,2,5),N(0,5,2,3))}function N(t,n,e,o){if(!l){console.error("drawLine: boardElement is null.");return}const i=l.querySelector(`.square[data-row='${t}'][data-col='${n}']`),r=l.querySelector(`.square[data-row='${e}'][data-col='${o}']`);if(!i||!r){console.warn(`drawLine: start or end square not found for (${t},${n}) to (${e},${o})`);return}const s=i.offsetWidth;if(s===0)return;const a=document.createElement("div");a.classList.add("palace-line");const v=i.offsetLeft+s/2,d=i.offsetTop+s/2,J=r.offsetLeft+s/2,Y=r.offsetTop+s/2,Z=Math.sqrt((J-v)**2+(Y-d)**2),ee=Math.atan2(Y-d,J-v)*180/Math.PI;a.style.width=`${Z}px`,a.style.height="2px",a.style.top=`${d}px`,a.style.left=`${v}px`,a.style.transformOrigin="0 0",a.style.transform=`rotate(${ee}deg)`,l.appendChild(a)}function P(){ae?ae.textContent=fe:console.warn("updateScoreDisplay: redScoreElement is null."),ce?ce.textContent=H:console.warn("updateScoreDisplay: blackScoreElement is null.")}function Re(t,n){if(g)return;if(u==="B"){f("请等待黑方(AI)思考完成",1500,!0);return}typeof x=="function"&&x();const e=c[t][n];if(h){const o=c[t][n];de(h.row,h.col,t,n,h.piece)?o&&o.charAt(0)===h.piece.charAt(0)?typeof C=="function"&&C(t,n,e):typeof Q=="function"&&Q(h.row,h.col,t,n):e&&e.charAt(0)===u&&typeof C=="function"&&C(t,n,e)}else e&&e.charAt(0)===u&&typeof C=="function"&&C(t,n,e)}function C(t,n,e){if(!l){console.error("selectPiece: boardElement is null.");return}if(h){const i=l.querySelector(`.square[data-row='${h.row}'][data-col='${h.col}']`);if(i){const r=i.querySelector(".piece");r&&r.classList.remove("selected")}}h={piece:e,row:t,col:n};const o=l.querySelector(`.square[data-row='${t}'][data-col='${n}']`);if(o){const i=o.querySelector(".piece");i&&i.classList.add("selected")}typeof ye=="function"&&ye(t,n,e)}function ye(t,n,e){if(!l){console.error("showValidMoves: boardElement is null.");return}typeof x=="function"&&x();for(let o=0;o<$;o++)for(let i=0;i<I;i++)if(de(t,n,o,i,e)){const r=l.querySelector(`.square[data-row='${o}'][data-col='${i}']`);if(r){const s=document.createElement("div");s.classList.add("valid-move"),r.appendChild(s),ue.push(s)}}}function x(){ue.forEach(t=>t.remove()),ue=[]}function Q(t,n,e,o){if(g||!l){console.warn("movePiece: Game over or boardElement is null.");return}U=!0,!q&&!g&&!z&&_();const i=c[t][n],r=c[e][o];W.push({boardState:JSON.parse(JSON.stringify(c)),currentPlayer:u,capturedPieceId:r}),c[e][o]=i,c[t][n]=null;const s=l.querySelector(`.square[data-row='${t}'][data-col='${n}']`),a=l.querySelector(`.square[data-row='${e}'][data-col='${o}']`);if(r){const d=a?a.querySelector(".piece"):null;d&&d.remove()}if(s){const d=s.querySelector(".piece");d&&(d.classList.remove("selected"),a&&a.appendChild(d))}else typeof X=="function"&&X(i,e,o);if(h=null,r){const d=r.substring(0,2);if(d==="BK"){typeof A=="function"&&A("R","黑方【将】被吃");return}if(d==="RK"){typeof A=="function"&&A("B","红方【帅】被吃");return}}const v=u==="R"?"B":"R";if(Te(v)){typeof A=="function"&&A(u,`${v==="R"?"红方":"黑方"}被将死`);return}if(Ce(v)){typeof A=="function"&&A(u,`${v==="R"?"红方":"黑方"}无棋可走 (困毙)`);return}typeof he=="function"&&he(),j&&(j.currentTime=0,j.play().catch(d=>console.warn("Audio play failed:",d)))}function A(t,n){if(!m||!l||!y){console.error("endGame: Essential DOM elements missing (resetButton, boardElement, or popupMessageElement).");return}p&&(p.terminate(),p=new Worker(new URL(""+new URL("ai-worker-ciCN5DwY.js",import.meta.url).href,import.meta.url),{type:"module"}),D()),g=!0;let e="",o="";t==="R"?(fe++,e="红方胜利",o="红方得1分",typeof P=="function"&&P(),f(`恭喜${e}！${n}。(${o}) 重置棋盘中...`,2e3),setTimeout(()=>{typeof E=="function"&&E(!1),u="R",g=!1,typeof b=="function"&&b(),l&&(l.style.pointerEvents="auto"),m&&(m.textContent="重新开始")},1500)):t==="B"?(H++,e="黑方胜利",o="黑方得1分",typeof P=="function"&&P(),f(`${e}！${n}。(${o}) 重置棋盘中...`,2e3),setTimeout(()=>{typeof E=="function"&&E(!1),u="B",g=!1,typeof b=="function"&&b(),l&&(l.style.pointerEvents="none"),m&&(m.textContent="重新开始"),f("黑方思考中...",1500),setTimeout(()=>{typeof G=="function"&&!g&&p&&G()},500)},1500)):(e="平局",f(`${e}！${n}。点击"再来一盘"开始新游戏`,5e3),m.textContent="再来一盘",l.style.pointerEvents="none",m&&(m.classList.add("highlight-button"),setTimeout(()=>{m.classList.remove("highlight-button")},5e3)))}function he(){g||(u=u==="R"?"B":"R",l&&(u==="B"?l.style.pointerEvents="none":l.style.pointerEvents="auto"),typeof b=="function"&&b(),u==="B"&&!g&&p&&(f("黑方思考中...",1500),setTimeout(G,500)))}function b(){g||f(`轮到 ${u==="R"?"红方":"黑方"} 行动`)}function de(t,n,e,o,i){if(!Me(t,n,e,o,i))return!1;const r=i.charAt(0),s=c[e][o];c[e][o]=i,c[t][n]=null;const a=me(r);return c[t][n]=i,c[e][o]=s,!a}function Me(t,n,e,o,i){const r=i.substring(1,2),s=i.charAt(0);if(t===e&&n===o)return!1;const a=c[e][o];if(a&&a.charAt(0)===s||e<0||e>=$||o<0||o>=I)return!1;switch(r){case"K":return Ae(t,n,e,o,s);case"A":return ke(t,n,e,o,s);case"E":return Le(t,n,e,o,s);case"H":return Pe(t,n,e,o);case"R":return qe(t,n,e,o);case"C":return $e(t,n,e,o);case"P":return xe(t,n,e,o,s);default:return!1}}function Ee(t,n,e){return n<3||n>5?!1:e==="R"?t>=7&&t<=9:e==="B"?t>=0&&t<=2:!1}function Ae(t,n,e,o,i){if(!Ee(e,o,i))return!1;const r=Math.abs(t-e),s=Math.abs(n-o);return r===1&&s===0||r===0&&s===1}function ke(t,n,e,o,i){return Ee(e,o,i)?Math.abs(t-e)===1&&Math.abs(n-o)===1:!1}function Le(t,n,e,o,i){return!(!(Math.abs(t-e)===2&&Math.abs(n-o)===2)||i==="R"&&e<5||i==="B"&&e>4||c[t+(e-t)/2][n+(o-n)/2])}function Pe(t,n,e,o,i){const r=Math.abs(t-e),s=Math.abs(n-o);if(!(r===1&&s===2||r===2&&s===1))return!1;if(r===2){if(c[t+(e-t)/2][n])return!1}else if(c[t][n+(o-n)/2])return!1;return!0}function qe(t,n,e,o,i){if(t!==e&&n!==o)return!1;if(t===e){for(let r=Math.min(n,o)+1;r<Math.max(n,o);r++)if(c[t][r])return!1}else for(let r=Math.min(t,e)+1;r<Math.max(t,e);r++)if(c[r][n])return!1;return!0}function $e(t,n,e,o,i){if(t!==e&&n!==o)return!1;let r=0;if(t===e)for(let s=Math.min(n,o)+1;s<Math.max(n,o);s++)c[t][s]&&r++;else for(let s=Math.min(t,e)+1;s<Math.max(t,e);s++)c[s][n]&&r++;return c[e][o]?r===1:r===0}function xe(t,n,e,o,i){const r=e-t,s=o-n;return i==="R"?t>4?r===-1&&s===0:r===-1&&s===0||r===0&&Math.abs(s)===1:t<5?r===1&&s===0:r===1&&s===0||r===0&&Math.abs(s)===1}function G(){if(g||u!=="B"||!p){console.warn("makeAIMove: Conditions not met or AI worker not available.");return}p.postMessage({type:"findBestMove",boardState:c,depth:K})}function ve(t){const n=t==="R"?"RK":"BK";for(let e=0;e<$;e++)for(let o=0;o<I;o++)if(c[e][o]&&c[e][o].substring(0,2)===n)return{r:e,c:o};return null}function me(t){const n=ve(t);if(!n)return!0;const e=t==="R"?"B":"R";for(let i=0;i<$;i++)for(let r=0;r<I;r++){const s=c[i][r];if(s&&s.charAt(0)===e&&Me(i,r,n.r,n.c,s)&&s.substring(1,2)!=="K")return!0}const o=ve(e);if(o&&n.c===o.c){let i=!1;for(let r=Math.min(n.r,o.r)+1;r<Math.max(n.r,o.r);r++)if(c[r][n.c]){i=!0;break}if(!i)return!0}return!1}function be(t){for(let n=0;n<$;n++)for(let e=0;e<I;e++){const o=c[n][e];if(o&&o.charAt(0)===t){for(let i=0;i<$;i++)for(let r=0;r<I;r++)if(de(n,e,i,r,o))return!0}}return!1}function Te(t){return me(t)&&!be(t)}function Ce(t){return!me(t)&&!be(t)}function De(){console.log(`[handleResign] Called. Current player at start of resign: ${u}`),g=!0;const t="B",n="黑方";console.log(`[handleResign] User (Red) is resigning. Winner: ${t}`),H++,console.log(`[handleResign] Black score incremented to: ${H}`),typeof P=="function"&&P(),p?(console.log("[handleResign] Terminating existing AI worker..."),p.onmessage=null,p.terminate(),console.log("[handleResign] Creating new AI worker..."),p=new Worker(new URL(""+new URL("ai-worker-ciCN5DwY.js",import.meta.url).href,import.meta.url),{type:"module"}),typeof D=="function"?(D(),console.log("[handleResign] New AI worker setup complete.")):console.error("[handleResign] setupAIWorker function is not defined!")):console.log("[handleResign] No AI worker instance to terminate/recreate."),f(`重置棋盘中，${n}先行...`,1500),setTimeout(()=>{console.log("[handleResign setTimeout] Starting delayed operations."),typeof E=="function"&&E(!1),u=t,g=!1,console.log(`[handleResign setTimeout] Next turn player set to: ${u}, gameOver reset to false.`),f("红方主动认输。黑方得1分。",3e3),typeof b=="function"&&b(),l&&(l.style.pointerEvents="none",p?(console.log("[handleResign setTimeout] AI's turn (B). Preparing to make AI move for the new game."),f("黑方思考中...",1500),typeof G=="function"&&setTimeout(G,500)):console.error("[handleResign setTimeout] AI's turn, but AI worker is null!")),m&&(m.textContent="重新开始"),console.log("[handleResign setTimeout] Delayed operations complete.")},1500)}function D(){if(!p){console.error("[setupAIWorker] aiWorker is null, cannot set onmessage.");return}console.log("[setupAIWorker] Setting up onmessage for current AI worker instance."),p.onmessage=function(t){const{type:n,move:e}=t.data;if(console.log(`[aiWorker.onmessage] Received message: type=${n}`,e),g&&n==="bestMove"){console.warn("[aiWorker.onmessage] Game is over (gameOver=true), but received a 'bestMove'. Ignoring move from worker.");return}if(n==="bestMove"&&e){if(u!=="B"){console.warn(`[aiWorker.onmessage] Received 'bestMove' but current player is ${u}, not 'B'. Ignoring.`);return}typeof Q=="function"?(console.log("[aiWorker.onmessage] Processing 'bestMove'. Calling movePiece."),Q(e.fromRow,e.fromCol,e.toRow,e.toCol),typeof Be=="function"&&Be(e.fromRow,e.fromCol,e.toRow,e.toCol)):console.error("[aiWorker.onmessage] movePiece function is not defined.")}}}function Oe(){if(g){f("游戏已结束，无法悔棋。",3e3,!0);return}if(u==="B"){f("AI思考中，请稍等...",2e3,!0);return}if(W.length<2){f("无法悔棋，历史记录不足两步。",3e3,!0);return}W.pop();const t=W.pop();t?(c=JSON.parse(JSON.stringify(t.boardState)),u=t.currentPlayer,typeof F=="function"&&F(),h=null,g=!1,l?l.style.pointerEvents="auto":console.warn("handleUndoMove: boardElement is null."),typeof b=="function"&&b(),f("悔棋成功。轮到 "+(u==="R"?"红方":"黑方")+" 行动。")):f("悔棋失败，历史记录异常。",3e3,!0)}function Be(t,n,e,o){if(!l)return;const i=document.getElementById("aiMoveIndicator");i&&(i.remove(),ie&&clearTimeout(ie));const r=l.querySelector(`.square[data-row='${t}'][data-col='${n}']`),s=l.querySelector(`.square[data-row='${e}'][data-col='${o}']`);if(!r||!s){console.warn("drawAIMoveIndicator: fromSquare or toSquare not found.");return}const a=l.getBoundingClientRect(),v=r.getBoundingClientRect(),d=s.getBoundingClientRect(),J=v.left+v.width/2-a.left,Y=v.top+v.height/2-a.top,Z=d.left+d.width/2-a.left,ee=d.top+d.height/2-a.top,O="http://www.w3.org/2000/svg",B=document.createElementNS(O,"svg");B.setAttribute("id","aiMoveIndicator"),B.style.position="absolute",B.style.left=`${a.left+window.scrollX}px`,B.style.top=`${a.top+window.scrollY}px`,B.style.width=`${a.width}px`,B.style.height=`${a.height}px`,B.style.pointerEvents="none",B.style.zIndex="10";const pe=document.createElementNS(O,"defs"),w=document.createElementNS(O,"marker");w.setAttribute("id","arrowhead"),w.setAttribute("markerWidth","6"),w.setAttribute("markerHeight","4.2"),w.setAttribute("refX","6"),w.setAttribute("refY","2.1"),w.setAttribute("orient","auto-start-reverse");const te=document.createElementNS(O,"polygon");te.setAttribute("points","0 0, 6 2.1, 0 4.2"),te.style.fill="rgba(0, 0, 139, 0.9)",w.appendChild(te),pe.appendChild(w),B.appendChild(pe);const R=document.createElementNS(O,"line");R.setAttribute("x1",J.toString()),R.setAttribute("y1",Y.toString()),R.setAttribute("x2",Z.toString()),R.setAttribute("y2",ee.toString()),R.style.stroke="rgba(0, 0, 139, 0.9)",R.style.strokeWidth="5",R.setAttribute("marker-end","url(#arrowhead)"),B.appendChild(R),document.body.appendChild(B),ie=setTimeout(()=>{B.remove()},2500)}function Ne(){if(M=[document.getElementById("bgMusic1"),document.getElementById("bgMusic2"),document.getElementById("bgMusic3"),document.getElementById("bgMusic4")],!M.every(n=>n!==null)){console.error("一个或多个背景音乐元素未找到");return}M.forEach((n,e)=>{n.addEventListener("ended",()=>{q&&We()})}),se=document.getElementById("musicToggleButton"),L=document.getElementById("musicToggleIcon"),se&&L?se.addEventListener("click",Ue):console.error("音乐控制按钮元素未找到"),S=Se(),U&&!z&&(console.log("尝试自动播放初始音乐"),setTimeout(()=>_(),1e3))}function _(){M.forEach((n,e)=>{e!==S&&(n.pause(),n.currentTime=0)});const t=M[S];if(t){const n=t.play();n!==void 0&&n.then(()=>{q=!0,L&&(L.textContent="🔊")}).catch(e=>{console.warn("无法自动播放背景音乐:",e),q=!1,L&&(L.textContent="🔇"),U||f("点击棋盘或按钮以启用背景音乐",3e3)})}}function Se(){if(M.length<=1)return 0;if(!q)return Math.floor(Math.random()*M.length);let t;do t=Math.floor(Math.random()*M.length);while(t===S);return t}function We(){M[S]&&(M[S].pause(),M[S].currentTime=0),S=Se(),_()}function Ke(){const t=M[S];t&&t.pause(),q=!1,z=!0,L&&(L.textContent="🔇")}function Ue(){q?(Ke(),f("背景音乐已暂停",1500)):(z=!1,_(),f("背景音乐已开启",1500))}window.addEventListener("DOMContentLoaded",()=>{l=document.getElementById("board"),m=document.getElementById("resetButton"),ne=document.getElementById("resignButton"),oe=document.getElementById("undoButton"),ae=document.getElementById("redScoreDisplay"),ce=document.getElementById("blackScoreDisplay"),T=document.getElementById("difficultyModal"),re=document.getElementById("startGameButton"),ge=document.querySelectorAll('input[name="modalDifficulty"]'),y=document.getElementById("popupMessage"),k=document.getElementById("currentDifficultyDisplay"),j=document.getElementById("clickSound"),Ne(),p=new Worker(new URL(""+new URL("ai-worker-ciCN5DwY.js",import.meta.url).href,import.meta.url),{type:"module"}),D();const t="错误：界面关键元素丢失，无法启动或重置游戏。";T?T.classList.remove("hidden"):(console.error("CRITICAL: Difficulty modal element not found in DOM. Attempting to start with default settings."),l&&y&&k&&m?E(!0):(console.error("Cannot initialize game due to missing essential DOM elements (fallback path)."),y?f(t,5e3,!0):console.error(t+" (popupMessageElement also missing)"))),re?re.addEventListener("click",()=>{ge.forEach(n=>{n.checked&&(K=parseInt(n.value))}),T&&T.classList.add("hidden"),U=!0,z=!1,q||_(),l&&y&&k&&m?E(!0):(console.error("Cannot start game after modal due to missing essential DOM elements."),y?f(t,5e3,!0):console.error(t+" (popupMessageElement also missing)"))}):console.error("CRITICAL: Start game button ('startGameButton') not found in DOM."),m?m.addEventListener("click",()=>{console.log("[resetButton] Clicked."),g=!0,p?(console.log("[resetButton] Terminating existing AI worker..."),p.onmessage=null,p.terminate(),console.log("[resetButton] Creating new AI worker..."),p=new Worker(new URL(""+new URL("ai-worker-ciCN5DwY.js",import.meta.url).href,import.meta.url),{type:"module"}),typeof D=="function"?(D(),console.log("[resetButton] New AI worker setup complete.")):console.error("[resetButton] setupAIWorker function is not defined!")):console.log("[resetButton] No AI worker instance to terminate/recreate."),f("游戏将被彻底重置，包括积分",2e3),T?(console.log("[resetButton] Showing difficulty modal."),T.classList.remove("hidden"),l?l.style.pointerEvents="none":console.warn("[resetButton] boardElement is null while trying to disable pointer events."),k?k.textContent="当前难度: 未选择":console.warn("[resetButton] currentDifficultyDisplay is null.")):(console.error("[resetButton] Difficulty modal not found. Attempting to re-initialize game directly."),l&&y&&k&&m?typeof E=="function"?E(!0):console.error("[resetButton] initializeBoardAndGame function is not defined for direct re-init!"):(console.error("[resetButton] Cannot re-initialize game due to missing essential DOM elements (direct re-init fallback)."),y?f(t,5e3,!0):console.error(t+" (popupMessageElement also missing for direct re-init)")))}):console.error("CRITICAL: Reset button ('resetButton') not found in DOM."),ne?ne.addEventListener("click",De):console.error("CRITICAL: Resign button ('resignButton') not found in DOM."),oe?oe.addEventListener("click",Oe):console.error("CRITICAL: Undo button ('undoButton') not found in DOM."),window.addEventListener("resize",()=>{typeof V=="function"&&setTimeout(V,100)}),document.addEventListener("click",()=>{U=!0})});
