<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中国象棋</title>
    <!-- 移除Google字体链接，使用本地字体 -->
    <!-- 移除Tailwind CDN，使用本地编译版本 -->
    <link rel="stylesheet" href="./style.css">
    <style>
        /* 添加本地字体回退方案 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
        }
    </style>
</head>
<body>
    <!-- 难度选择模态对话框 -->
    <div id="difficultyModal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="modal-content bg-white p-6 rounded-lg shadow-xl text-center">
            <h2 class="text-xl font-semibold mb-4">选择游戏难度</h2>
            <div class="difficulty-options mb-6">
                <label class="block mb-2"><input type="radio" name="modalDifficulty" value="2" checked> 易 (深度 2)</label>
                <label class="block mb-2"><input type="radio" name="modalDifficulty" value="3"> 中 (深度 3)</label>
                <label class="block"><input type="radio" name="modalDifficulty" value="4"> 难 (深度 4)</label>
            </div>
            <button id="startGameButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">开始游戏</button>
        </div>
    </div>

    <div class="board-container">
        <div class="scores">
            <span class="mr-4">红方得分: <span id="redScoreDisplay">0</span></span>
            <span>黑方得分: <span id="blackScoreDisplay">0</span></span>
        </div>
        <div class="board" id="board">
            <div class="river-overlay">
                <span class="chu-he">楚 河</span>
                <span class="han-jie">漢 界</span>
                <div id="popupMessage" class="popup-message hidden">
                    <!-- 消息内容会通过JS填充 -->
                </div>
            </div>
        </div>
        <!-- 新的容器，包含难度显示和控制按钮 -->
        <div class="status-controls-container mt-4 flex items-center justify-center w-full" style="max-width: 540px;"> 
            <div class="controls flex">
                <button id="resetButton" class="rounded-lg">重新开始</button>
                <button id="resignButton" class="rounded-lg ml-2">认输</button>
                <button id="undoButton" class="rounded-lg ml-2">悔棋</button>
                <button id="musicToggleButton" class="rounded-lg ml-2">
                    <span id="musicToggleIcon">🔊</span>
                </button>
                <button id="nextMusicButton" class="rounded-lg ml-2">
                    <span>⏭️</span>
                </button>
            </div>
            <div id="currentDifficultyDisplay" class="text-sm text-gray-700 ml-4">
                当前难度: 未选择
            </div>
        </div>
    </div>

    <!-- 音效文件 -->
    <audio id="clickSound" src="audio/click.wav" preload="auto"></audio>
    
    <!-- 背景音乐文件 -->
    <audio id="bgMusic1" src="audio/1.mp3" preload="auto"></audio>
    <audio id="bgMusic2" src="audio/2.mp3" preload="auto"></audio>
    <audio id="bgMusic3" src="audio/3.mp3" preload="auto"></audio>
    <audio id="bgMusic4" src="audio/4.mp3" preload="auto"></audio>

    <script type="module" src="./main.js"></script>
</body>
</html>
